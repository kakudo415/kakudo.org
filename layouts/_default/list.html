{{ define "extraHeads" }}
  {{ $css := resources.Get "sass/list.scss" | resources.ToCSS (dict "transpiler" "dartsass" "outputStyle" "compressed") | resources.Fingerprint }}
  <link rel="stylesheet" href="{{ $css.Permalink }}">
{{ end }}

{{ define "main" }}
  <div class="container">
    <div class="name">
      {{ partial "header.html" . }}
    </div>
    <div class="home-menu">
      {{ partial "home-menu.html" . }}
    </div>
    <div class="site-menu">
      {{ partial "site-menu.html" . }}
    </div>
    <main class="topics">
      <h2>All posts</h2>
      {{ $blog := where .Site.RegularPages "Section" "blog" }}
      {{ range $blog.GroupByDate "2006" }}
        <section class="yearly">
          <p class="year-header">{{ .Key }}</p>
          {{ range .Pages.GroupByDate "01"}}
            <section class="monthly">
              <p class="month-header">{{ .Key }}</p>
              {{ range .Pages }}
                <a href="{{ .Permalink }}" class="topic">
                  {{ if .Params.thumbnail }}
                    {{ $sourceImage := .Resources.GetMatch .Params.thumbnail }}
                    {{ $webpImage := $sourceImage.Resize "744x webp" }}
                    {{ $resizedImage := $sourceImage.Resize "744x" }}
                    <picture class="thumbnail">
                      <source srcset="{{ $webpImage.RelPermalink }}" type="image/webp">
                      <img src="{{ $resizedImage.RelPermalink }}" width="{{ $resizedImage.Width }}" height="{{ $resizedImage.Height }}" alt="Thumbnail">
                    </picture>
                  {{ end }}
                  <h3>{{ .Title }}</h3>
                  {{ with .Params.Description }}
                    <p>{{ . }}</p>
                  {{ end }}
                </a>
              {{ end }}
            </section>
          {{ end }}
        </section>
      {{ end }}
    </main>
  </div>
{{ end }}